<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code</title>
    <!-- Adicione a referência ao jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
   <!-- Defina o id da imagem -->
   <img id="qrCodeImage" />
   <script>
       // Função para atualizar o QR code
       function updateQRCode() {
           // Fazer uma requisição AJAX para obter o QR code atualizado
           $.get('http://127.0.0.1:3000/qr-code', function(qrCodeHTML,r) {
               // Extrair o src da imagem do HTML retornado pela requisição
               const regex = /<img src="([^"]+)"/;
               const match = qrCodeHTML.match(regex);
               if (match && match.length > 1) {
                   const qrCodeSrc = match[1];
                   console.log(qrCodeSrc)
                   console.log(r)
                   
                   $('#qrCodeImage').attr('src', qrCodeSrc);
               }
           }).fail(function(error) {
               console.error('Erro ao obter o QR code:', error);
           });
       }
       
       // Chamar a função inicialmente para carregar o QR code
       updateQRCode();
       
       // Chamar a função a cada 10 segundos para atualizar o QR code
       setInterval(updateQRCode, 10000);
   </script>
</body>
</html>
